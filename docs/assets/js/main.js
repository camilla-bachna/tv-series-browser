"use strict";const inputElement=document.querySelector(".js-input"),buttonElement=document.querySelector(".js-button"),showContainer=document.querySelector(".js-show-container"),formElement=document.querySelector(".js-form"),favoriteContainer=document.querySelector(".js-favorite-container");let resultShows=[],favoriteShows=[];function searchSeries(){const e=inputElement.value.toUpperCase();fetch("https://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{resultShows=e,paintShows()})}function paintShows(){let e="";for(const t of resultShows){const o=t.show.name.toUpperCase(),n=t.show.image,s=t.show.id;let i,r;i=isFavoriteShow(t)?"container__list--favorite":"",e+=`<li class="container__list js-container ${i}" id="${s}">`,r=null===n?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":""+n.original,e+=`<img class="container__list--image" src="${r}" alt="poster of series" />`,e+=`<h2 class="container__list--title ${i}">${o}</h2>`,e+=`<h3 class="container__list--genre ${i}">${t.show.genres}</h3>`,e+="</li>"}showContainer.innerHTML=e,listenContainerElement()}function isFavoriteShow(e){return void 0!==favoriteShows.find((function(t){const o=t.show,n=e.show;return o.id===n.id}))}function listenContainerElement(){const e=document.querySelectorAll(".js-container");for(const t of e)t.addEventListener("click",handleShow)}function handleShow(e){const t=parseInt(e.currentTarget.id);if(void 0===favoriteShows.find((function(e){return e.show.id===t}))){const e=resultShows.find((function(e){return e.show.id===t}));favoriteShows.push(e)}else{const e=favoriteShows.findIndex((function(e){return e.show.id===t}));favoriteShows.splice(e,1)}paintShows(),paintfavorites()}function paintfavorites(){let e="";for(const t of favoriteShows){const o=t.show.name,n=t.show.image,s=t.show.id;let i;e+='<li class="favorites__list">',i=null===n?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":""+n.original,e+=`<img class="favorites__list--image" src="${i}" alt="poster of favorite series" />`,e+=`<h4 class="favorites__list--title">${o}</h4>`,e+="</li>",e+=`<div class="favorites__list--x js-x" id="${s}">x`,e+="</div>"}favoriteContainer.innerHTML=e,storeLocalStorage(),listenContainerElementX()}function handleForm(e){e.preventDefault()}function storeLocalStorage(){const e=JSON.stringify(favoriteShows);localStorage.setItem("favoriteShowsSaved",e)}function getLocalStorageShows(){const e=localStorage.getItem("favoriteShowsSaved");if(null!==e){const t=JSON.parse(e);favoriteShows=t,paintfavorites()}}buttonElement.addEventListener("click",searchSeries),formElement.addEventListener("submit",handleForm),getLocalStorageShows();const resetButton=document.querySelector(".js-reset-button");function resetAll(){localStorage.removeItem("favoriteShowsSaved"),favoriteShows=[],paintfavorites(),paintShows()}function handleX(e){const t=parseInt(e.currentTarget.id),o=favoriteShows.findIndex((function(e){return e.show.id===t}));-1!==o&&(favoriteShows.splice(o,1),paintfavorites(),paintShows())}function listenContainerElementX(){const e=document.querySelectorAll(".js-x");for(const t of e)t.addEventListener("click",handleX)}resetButton.addEventListener("click",resetAll);