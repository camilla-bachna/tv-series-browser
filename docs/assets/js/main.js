"use strict";const inputElement=document.querySelector(".js-input"),buttonElement=document.querySelector(".js-button"),showContainer=document.querySelector(".js-show-container"),formElement=document.querySelector(".js-form"),favoriteContainer=document.querySelector(".js-favorite-container");let resultShows=[],favoriteShows=[];function searchSeries(){const e=inputElement.value.toUpperCase();fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{resultShows=e,paintShows()})}function paintShows(){let e="";for(const t of resultShows){const o=t.show.name.toUpperCase(),n=t.show.image,s=t.show.id;let i,r;i=isFavoriteShow(t)?"list__element--favorite":"",e+=`<li class="list__element js-container ${i}" id="${s}">`,r=null===n?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":""+n.original,e+=`<img class="list__element--image" src="${r}" alt="poster of series" />`,e+=`<h2>${o}</h2>`,e+="</li>"}showContainer.innerHTML=e,listenContainerElement()}function isFavoriteShow(e){return void 0!==favoriteShows.find((function(t){const o=t.show,n=e.show;return o.id===n.id}))}function listenContainerElement(){const e=document.querySelectorAll(".js-container");for(const t of e)t.addEventListener("click",handleShow)}function handleShow(e){const t=e.currentTarget.id;if(void 0===favoriteShows.find((function(e){return e.show.id==t}))){const e=resultShows.find((function(e){return e.show.id==t}));favoriteShows.push(e)}else{const e=favoriteShows.findIndex((function(e){return e.show.id==t}));favoriteShows.splice(e,1)}paintShows(),paintfavorites()}function paintfavorites(){let e="";for(const t of favoriteShows){const o=t.show.name,n=t.show.image;let s;e+='<li class="fav-show">',s=null===n?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":""+n.original,e+=`<img class="fav-show--image" src="${s}" alt="poster of favorite series" />`,e+=`<h4 class="fav-show-title">${o}</h4>`,e+="</li>"}favoriteContainer.innerHTML=e,storeLocalStorage()}function handleForm(e){e.preventDefault()}function storeLocalStorage(){const e=JSON.stringify(favoriteShows);console.log(favoriteShows),localStorage.setItem("favoriteShowsSaved",e)}function getLocalStorageShows(){const e=localStorage.getItem("favoriteShowsSaved");if(null===e)paintfavorites();else{const t=JSON.parse(e);favoriteShows=t,paintfavorites()}}getLocalStorageShows(),buttonElement.addEventListener("click",searchSeries),formElement.addEventListener("submit",handleForm);